;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;								;
; Copyright (c) 2008-2016 Fidelity National Information		;
; Services, Inc. and/or its subsidiaries. All rights reserved.	;
;								;
; Copyright (c) 2018 YottaDB LLC and/or its subsidiaries.	;
; All rights reserved.						;
;								;
;	This source code contains the intellectual property	;
;	of its copyright holder(s), and is made available	;
;	under a license.  If you do not know the terms of	;
;	the license, please stop and do not read further.	;
;								;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 s a="here"
 s b="its"
 s c="getting"
 s d="rather"
 s e="hot"
 s f="these"
 s g="days"
 s h="like"
 s i="the"
 s j="summers"
 s k="we"
 s l="have"
 s m="been"
 s n="having"
 s o="here"
 s p="for"
 s q="the"
 s r="past"
 s s="few"
 s t="years"
 s u="gosh"
 s v="anjul"
 s w="do"
 s x="i"
 s y="miss"
 s z="you"
 s a="here"
 s b="there"
 s c="is"
 s d="not"
 s e="a"
 s f="single"
 s g="person"
 s h="who"
 s i="has"
 s j="the"
 s k="kind"
 s l="of"
 s m="temprament"
 s n="we"
 s o="had"
 s p="sitting"
 s q="at"
 s r="cb"
 s s="indefinately"
 s t="only"
 s u="you"
 s v="could"
 s w="beat"
 s x="me"
 s y="at"
 s z="that"
 s a="i"
 s b="am"
 s c="going"
 s d="home"
 s e="on"
 s f="the"
 s g="14th"
 s h="for"
 s i="a"
 s j="period"
 s k="of"
 s l="7"
 s m="days"
 s n="only"
 s o="thats"
 s p="enough"
 s q="actually"
 s r="cant"
 s s="spend"
 s t="too"
 s u="much"
 s v="time"
 s w="there"
 s x="There"
 s y="was"
 s z="a"
 s a="presentation"
 s b="that"
 s c="we"
 s d="gave"
 s e="to"
 s f="satyam"
 s g="at"
 s h="the"
 s i="Dominion"
 s j="club"
 s k="chandru"
 s l="ramesh"
 s m="vinay"
 s n="and"
 s o="I"
 s p="spoke"
 s q="chandru"
 s r="as"
 s s="usual"
 s t="got"
 s u="stuck"
 s v="in"
 s w="a"
 s x="few"
 s y="places"
 s z="and"
 s a="was"
 s b="bailed"
 s c="out"
 s d="by"
 s e="vinay"
 s f="ramesh"
 s g="and"
 s h="vinay"
 s i="gave"
 s j="good"
 s k="talks"
 s l="Mine"
 s m="was"
 s n="not"
 s o="too"
 s p="involved"
 s q="and"
 s r="it"
 s s="was"

 s a=1
 s b=2
 s c=3
 s d=4
 s e=5
 s f=6
 s g=7
 s h=8
 s i=9
 s j=0
 s k=1
 s l=2
 s m=3
 s n=4
 s o=5
 s p=6
 s q=7
 s r=8
 s s=9
 s t=0
 s u=1
 s v=2
 s w=3
 s x=4
 s y=5
 s z=6
 w a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z
 w a+b+c+d+e+f+g+h+i+j+k+l+m+n+o+p+q+r+s+t+u+v+w+x+y+z
 w !
 w 1
 w "hello"
 w 1+1
 w a+1
 w a+a
 s b="hello"
 w b
 s c=2+3
 i 1 w 2
 e  w 3
 i 1 w 2 e  w 3
 i 1 w 2 i 0 w 2
 e  w 1 e  w 2 e  w 3
 kill a
 kill b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z
 s x="test1"
 o x
 u x
 c x

 s ^a="here"
 s ^b="its"
 s ^c="getting"
 s ^d="rather"
 s ^e="hot"
 s ^f="these"
 s ^g="days"
 s ^h="like"
 s ^i="the"
 s ^j="summers"
 s ^k="we"
 s ^l="have"
 s ^m="been"
 s ^n="having"
 s ^o="here"
 s ^p="for"
 s ^q="the"
 s ^r="past"
 s ^s="few"
 s ^t="years"
 s ^u="gosh"
 s ^v="anjul"
 s ^w="do"
 s ^x="i"
 s ^y="miss"
 s ^z="you"
 s ^a="here"
 s ^b="there"
 s ^c="is"
 s ^d="not"
 s ^e="a"
 s ^f="single"
 s ^g="person"
 s ^h="who"
 s ^i="has"
 s ^j="the"
 s ^k="kind"
 s ^l="of"
 s ^m="temprament"
 s ^n="we"
 s ^o="had"
 s ^p="sitting"
 s ^q="at"
 s ^r="cb"
 s ^s="indefinately"
 s ^t="only"
 s ^u="you"
 s ^v="could"
 s ^w="beat"
 s ^x="me"
 s ^y="at"
 s ^z="that"
 s ^a="i"
 s ^b="am"
 s ^c="going"
 s ^d="home"
 s ^e="on"
 s ^f="the"
 s ^g="14th"
 s ^h="for"
 s ^i="a"
 s ^j="period"
 s ^k="of"
 s ^l="7"
 s ^m="days"
 s ^n="only"
 s ^o="thats"
 s ^p="enough"
 s ^q="actually"
 s ^r="cant"
 s ^s="spend"
 s ^t="too"
 s ^u="much"
 s ^v="time"
 s ^w="there"
 s ^x="There"
 s ^y="was"
 s ^z="a"
 s ^a="presentation"
 s ^b="that"
 s ^c="we"
 s ^d="gave"
 s ^e="to"
 s ^f="satyam"
 s ^g="at"
 s ^h="the"
 s ^i="Dominion"
 s ^j="club"
 s ^k="chandru"
 s ^l="ramesh"
 s ^m="vinay"
 s ^n="and"
 s ^o="I"
 s ^p="spoke"
 s ^q="chandru"
 s ^r="as"
 s ^s="usual"
 s ^t="got"
 s ^u="stuck"
 s ^v="in"
 s ^w="a"
 s ^x="few"
 s ^y="places"
 s ^z="and"
 s ^a="was"
 s ^b="bailed"
 s ^c="out"
 s ^d="by"
 s ^e="vinay"
 s ^f="ramesh"
 s ^g="and"
 s ^h="vinay"
 s ^i="gave"
 s ^j="good"
 s ^k="talks"
 s ^l="Mine"
 s ^m="was"
 s ^n="not"
 s ^o="too"
 s ^p="involved"
 s ^q="and"
 s ^r="it"
 s ^s="was"

 s ^a=1
 s ^b=2
 s ^c=3
 s ^d=4
 s ^e=5
 s ^f=6
 s ^g=7
 s ^h=8
 s ^i=9
 s ^j=0
 s ^k=1
 s ^l=2
 s ^m=3
 s ^n=4
 s ^o=5
 s ^p=6
 s ^q=7
 s ^r=8
 s ^s=9
 s ^t=0
 s ^u=1
 s ^v=2
 s ^w=3
 s ^x=4
 s ^y=5
 s ^z=6
 w ^a,^b,^c,^d,^e,^f,^g,^h,^i,^j,^k,^l,^m,^n,^o,^p,^q,^r,^s,^t,^u,^v,^w,^x,^y,^z
 w ^a+^b+^c+^d+^e+^f+^g+^h+^i+^j+^k+^l+^m+^n+^o+^p+^q+^r+^s+^t+^u+^v+^w+^x+^y+^z
 w !
 w 1
 w "hello"
 w 1+1
 w ^a+1
 w ^a+^a
 s ^b="hello"
 w ^b
 s ^c=2+3
 i 1 w 2
 e  w 3
 i 1 w 2 e  w 3
 i 1 w 2 i 0 w 2
 e  w 1 e  w 2 e  w 3
 kill ^a
 kill ^b,^c,^d,^e,^f,^g,^h,^i,^j,^k,^l,^m,^n,^o,^p,^q,^r,^s,^t,^u,^v,^w,^x,^y,^z
 s ^x="test2"
 o ^x:newver
 u ^x
 w "hello world",!
 w 1,2,3,!
 w ^x
 w !
 c ^x

 s ^one("a","b","c","d","e","f",7,8,9)="one"
 s ^one(1,2,3,"d","e","f","g")=2
 s ^three("a","b","c","d","e","f",7,8,9)=1
 s ^three(1,2,3,"d","e","f","g")="two"
 w ^one("a","b","c","d","e","f",7,8,9),^one(1,2,3,"d","e","f","g"),^three("a","b","c","d","e","f",7,8,9),^three(1,2,3,"d","e","f","g")
 w ^one(1,2,3,"d","e","f","g")+^three("a","b","c","d","e","f",7,8,9)+2

 kill ^one("a","b","c","d","e","f",7,8,9),^one(1,2,3,"d","e","f","g"),^three("a","b","c","d","e","f",7,8,9),^three(1,2,3,"d","e","f","g")

 s one("a","b","c","d","e","f",7,8,9)="one"
 s one(1,2,3,"d","e","f","g")=2
 s three("a","b","c","d","e","f",7,8,9)=1
 s three(1,2,3,"d","e","f","g")="two"
 w one("a","b","c","d","e","f",7,8,9),one(1,2,3,"d","e","f","g"),three("a","b","c","d","e","f",7,8,9),three(1,2,3,"d","e","f","g")
 w one(1,2,3,"d","e","f","g")+three("a","b","c","d","e","f",7,8,9)+2

 kill one("a","b","c","d","e","f",7,8,9),one(1,2,3,"d","e","f","g"),three("a","b","c","d","e","f",7,8,9),three(1,2,3,"d","e","f","g")

 write !,$Horolog
 write !,$Io
 write !,$Job
 write !,$Principal
 write !,$Storage
 write !,$Test
 write !,$TLevel
 write !,$TRestart
 write !,$X
 write !,$Y
 write !,$ZA
 write !,$ZB
 write !,$ZCOmpile
 write !,$ZCSTATUS
 write !,$ZDIRectory
 write !,$ZEDIT
 write !,$ZEOF
 write !,$ZGBLdir
 write !,$ZIO
 write !,$ZLEVEL
 write !,$ZPOSition
 write !,$ZPROMPt
 write !,$ZROutines
 write !,$ZSOurce
 write !,$ZStatus
 write !,$ZSTep
 write !,$ZTrap
 write !,$ZVersion

 for i=1:1:10 w !,i
 for i=1,2,5 w !,i
 for i=10:-1:0 w !,i
 for i=-10:1:5 w !,i
 for i=1.3:1.2:12 w !,i
 for i=1:1 w !,i quit:i=10
 for  set i=$g(i)+1 w !,i quit:i=20
 set i=0
 for  set i=i+1 w !,i quit:i=10
 set i=0
 for  set i=i+1 w !,i if i=10 quit


 w !,$A("A")
 w !,$C(65)
 kill x
 w !,$D(x)
 set x=1 w !,$D(x)
 set x(1)=10 w !,$D(x)
 zk x w !,$D(x)

 kill ^x
 w !,$D(^x)
 set ^x=1 w !,$D(^x)
 set ^x(1)=10 w !,$D(^x)
 zk ^x w !,$D(^x)

 w !,$E("hello")
 w !,$E("hello",3)
 w !,$E("hello",2,4)

 set a="hello"
 w !,$E(a)
 w !,$E(a,3)
 w !,$E(a,2,4)

 w !,$F("world","r")
 w !,$F("world","rl")
 w !,$F("world","x")
 w !,$F("world","ld")

 w !,$Fn(-10,"-")
 w !,$Fn(-10,"t")
 w !,$Fn(-10,"p")
 w !,$Fn(-999999,",")
 w !,$Fn(10,"+")
 w !,$Fn(10.1111,"",2)
 w !,$Fn(10,"+",3)

 kill x
 w !,$G(x,"foo")
 w !,$G(x)+1
 set x=55 w !,$G(x)+1

 w !,$J("high",10)
 w !,$J("high",10,2)
 w !,$J(250.49,0,1)
 w !,$J(250.49,1)

 w !,$L("hello world")
 w !,$L("hello world"," ")
 w !,$L("")

 kill x
 set x(1)=1,x(3)=3,x(4)=4,x(-1)=-1
 w !,$O(x(""))
 w !,$O(x(1))
 w !,$O(x(2))
 w !,$O(x(3))
 w !,$O(x(4))
 w !,$O(x(-1))

 kill ^x
 set ^x(1)=1,^x(3)=3,^x(4)=4,^x(-1)=-1
 w !,$O(^x(""))
 w !,$O(^x(1))
 w !,$O(^x(2))
 w !,$O(^x(3))
 w !,$O(^x(4))
 w !,$O(^x(-1))

 K  S (a(1),a(2000),a("CAT"),a("cat"),a("ALF"),a(12))=1
 S x="" F  S x=$O(a(x)) q:x=""  W !,x

 K a("CAT") SET a(5,10)="woolworths",a("cat")="last"
 S x="" F  S x=$O(a(x),-1) Q:x=""  W !,x

 k  s (%(1),tiva(2),A(3),tiv(4),Q(5),%a(6))=""
 s x="%"
 w:$d(@x) !,x f  s x=$o(@x) q:x=""  w !,x

 s x="zzzzzzzz"
 w:$d(@x) !,x f  s x=$o(@x,-1) q:x=""  w !,x


 w !,$P("hello world"," ")
 w !,$P("hello world"," ",2)
 w !,$P("hello world","l",2,3)
 for i=0:1:3 write !,$piece("1 2"," ",i),"<"
 for i=-1:1:3 write !,$piece("1 2"," ",i,i+1),"<"
 F p=1:1:$L(x,"/") w ?p-1*10,$p(x,"/",p)
 s $P(x,".",25)="" W x

 kill ^x
 s ^X(1,2,3)="123"
 s ^X(1,2,3,7)="1237"
 s ^X(1,2,4)="124"
 s ^X(1,2,5,9)="1259"
 s ^X(1,6)="16"
 s ^X("B",1)="AB"
 s y="^X"
 FOR  SET y=$QUERY(@y) QUIT:y=""  WRITE !,y,"=",@y

 w !,$R(1)
 w !,$R(10)
 w !,$R(10)
 w !,$R(10000)
 w !,$R(1000000000)

 w !,$S(0:"hello",1:"world")
 w !,$S(1=1:"hello",1:"world")
 F i=3:-1:0 W:i !,$S(i=1:"hear",i=2:"come",i=3:"Watson")

 w !,$TR("hello world","aeiou")
 w !,$TR("hello world"," ","-")

 w !,$ZD($H)
 w !,$ZD($H,"DD-MON-YEAR")
 w $zd($H,"DD-MON-YEAR")

 w !,$ZTRNLNM("gtmgbldir")

 w !,$H,!,"Hanging for 10 seconds"
 hang 10
 w !,$H

 k
 zwr
 set a=1,b=2
 zwr
 k (a)
 zwr
 k
 zwr

 view "gdscert":1
 view "gdscert":0

 zshow "*"

 lock a
 zshow "l"
 lock     ; unlock all
 lock a,+b
 zshow "l"
 lock -b   ; unlock b
 zshow "l"
 l +a
 zshow "l"
 l (x,y)
 zshow "l"
 lock

 set ^b("a")=1
 zwr ^b
 set ^a=1
 zwr ^a
 set ^a(1)="a"
 zwr ^a

 kill ^a,^b
 ts ():s set ^a=1 w !,^a set ^b=2 tc
 zwr ^a zwr ^b

 kill ^a,^b
 ts ():s
 set ^a=1
 w !,^a
 set ^b=2
 tc
 zwr ^a zwr ^b

 kill ^a,^b
 ts ():s
 set ^a=1
 w !,^a
 set ^b=2
 tro
 w !,$D(^a),$D(^b)

 w !,$zsearch("*")  ; should come back with first file in the directory

 w !,$name(^a(1,"hello",2,"world"),0)
 w !,$name(^a(1,"hello",2,"world"),1)
 w !,$name(^a(1,"hello",2,"world"),2)
 w !,$name(^a(1,"hello",2,"world"),3)
 w !,$name(^a(1,"hello",2,"world"),4)
 w !,$name(^a(1,"hello",2,"world"),5)

 set x="a""b",^y(1,x,"b",4)=""
 w $name(^(3),3)

 w $t(+0)

 w !,$view("gvfile","DEFAULT")

 w !,$zparse("file.list","name")
 w !,$zparse("file.list","type")
 w !,$zparse("file.list","directory","~enricop","syntax_only")

 s t=0,i=1
 s b1=$zbitstr(i,t)
 i $zbitlen(b1)'=i w !,"oops"
 i i+15\8'=$l(b1) w !,"oops"
 i 8-(i#8)#8'=$a(b1) w !,"oops"
 i i*t'=$zbitcount(b1) w !,"oops"
 i $zbitfind(b1,t)'=2 w !,"oops"
 i $zbitfind(b1,'t) w !,"oops"
 i 256-(2**$a(b1))*t'=$a(b1,$l(b1)) w !,"oops"
 s b2=$zbitset(b1,1,'t),b2=$zbitset(b2,i,'t)
 i $zbitfind(b2,'t)'=2 w !,"oops"
 i i>1,$zbitfind(b2,'t,2)-1'=i w !,"oops"
 i i>2,$zbitfind(b2,t)'=3 w !,"oops"
 i $zbitfind(b2,'t,i+10)'=0 w !,"oops"
 s bo=$zbitor(b1,b2),ba=$zbitand(b1,b2),bx=$zbitxor(b1,b2)
 i bo'=$s(t:b1,1:b2) w !,"oops"
 i ba'=$s(t:b2,1:b1) w !,"oops"
 i bx'=$zbitand($zbitnot(ba),bo) w !,"oops"
 s b2=$zbitstr(i+1,'t)
 s bo=$zbitor(b1,b2),ba=$zbitand(b1,b2),bx=$zbitxor(b1,b2)
 i bo'=$zbitset($zbitstr(i+1,1),i+1,'t) w !,"oops"
 i ba'=$zbitstr(i,0) w !,"oops"
 i bx'=$zbitstr(i,1) w !,"oops"
 s t=0,i=2
 s b1=$zbitstr(i,t)
 i $zbitlen(b1)'=i w !,"oops"
 i i+15\8'=$l(b1) w !,"oops"
 i 8-(i#8)#8'=$a(b1) w !,"oops"
 i i*t'=$zbitcount(b1) w !,"oops"
 i $zbitfind(b1,t)'=2 w !,"oops"
 i $zbitfind(b1,'t) w !,"oops"
 i 256-(2**$a(b1))*t'=$a(b1,$l(b1)) w !,"oops"
 s b2=$zbitset(b1,1,'t),b2=$zbitset(b2,i,'t)
 i $zbitfind(b2,'t)'=2 w !,"oops"
 i i>1,$zbitfind(b2,'t,2)-1'=i w !,"oops"
 i i>2,$zbitfind(b2,t)'=3 w !,"oops"
 i $zbitfind(b2,'t,i+10)'=0 w !,"oops"
 s bo=$zbitor(b1,b2),ba=$zbitand(b1,b2),bx=$zbitxor(b1,b2)
 i bo'=$s(t:b1,1:b2) w !,"oops"
 i ba'=$s(t:b2,1:b1) w !,"oops"
 i bx'=$zbitand($zbitnot(ba),bo) w !,"oops"
 s b2=$zbitstr(i+1,'t)
 s bo=$zbitor(b1,b2),ba=$zbitand(b1,b2),bx=$zbitxor(b1,b2)
 i bo'=$zbitset($zbitstr(i+1,1),i+1,'t) w !,"oops"
 i ba'=$zbitstr(i,0) w !,"oops"
 i bx'=$zbitstr(i,1) w !,"oops"

 read x:10
 s t=1,i=1
 s b1=$zbitstr(i,t)
 i $zbitlen(b1)'=i w !,"oops"
 i i+15\8'=$l(b1) w !,"oops"
 i 8-(i#8)#8'=$a(b1) w !,"oops"
 i i*t'=$zbitcount(b1) w !,"oops"
 i $zbitfind(b1,t)'=2 w !,"oops"
 i $zbitfind(b1,'t) w !,"oops"
 i 256-(2**$a(b1))*t'=$a(b1,$l(b1)) w !,"oops"
 s b2=$zbitset(b1,1,'t),b2=$zbitset(b2,i,'t)
 i $zbitfind(b2,'t)'=2 w !,"oops"
 i i>1,$zbitfind(b2,'t,2)-1'=i w !,"oops"
 i i>2,$zbitfind(b2,t)'=3 w !,"oops"
 i $zbitfind(b2,'t,i+10)'=0 w !,"oops"
 s bo=$zbitor(b1,b2),ba=$zbitand(b1,b2),bx=$zbitxor(b1,b2)
 i bo'=$s(t:b1,1:b2) w !,"oops"
 i ba'=$s(t:b2,1:b1) w !,"oops"
 i bx'=$zbitand($zbitnot(ba),bo) w !,"oops"
 s b2=$zbitstr(i+1,'t)
 s bo=$zbitor(b1,b2),ba=$zbitand(b1,b2),bx=$zbitxor(b1,b2)
 i bo'=$zbitset($zbitstr(i+1,1),i+1,'t) w !,"oops"
 i ba'=$zbitstr(i,0) w !,"oops"
 i bx'=$zbitstr(i,1) w !,"oops"

 hang 1
 s t=1,i=2
 s b1=$zbitstr(i,t)
 i $zbitlen(b1)'=i w !,"oops"
 i i+15\8'=$l(b1) w !,"oops"
 i 8-(i#8)#8'=$a(b1) w !,"oops"
 i i*t'=$zbitcount(b1) w !,"oops"
 i $zbitfind(b1,t)'=2 w !,"oops"
 i $zbitfind(b1,'t) w !,"oops"
 i 256-(2**$a(b1))*t'=$a(b1,$l(b1)) w !,"oops"
 s b2=$zbitset(b1,1,'t),b2=$zbitset(b2,i,'t)
 i $zbitfind(b2,'t)'=2 w !,"oops"
 i i>1,$zbitfind(b2,'t,2)-1'=i w !,"oops"
 i i>2,$zbitfind(b2,t)'=3 w !,"oops"
 i $zbitfind(b2,'t,i+10)'=0 w !,"oops"
 s bo=$zbitor(b1,b2),ba=$zbitand(b1,b2),bx=$zbitxor(b1,b2)
 i bo'=$s(t:b1,1:b2) w !,"oops"
 i ba'=$s(t:b2,1:b1) w !,"oops"
 i bx'=$zbitand($zbitnot(ba),bo) w !,"oops"
 s b2=$zbitstr(i+1,'t)
 s bo=$zbitor(b1,b2),ba=$zbitand(b1,b2),bx=$zbitxor(b1,b2)
 i bo'=$zbitset($zbitstr(i+1,1),i+1,'t) w !,"oops"
 i ba'=$zbitstr(i,0) w !,"oops"
 i bx'=$zbitstr(i,1) w !,"oops"

 write !,"# list the m files using zsystem call",!
 zsystem "ls *.m"
 write "# cat test1 and test2",!
 zsystem "cat test1 ; cat test2"

 set (^a,a)=0
 tstart (a)
 write !,^a,?5,a
 set (^a,a)=1
 if '$trestart trestart
 trollback
 write !,^a,?5,a
 tstart
 set ^a=1
 write !,$tlevel
 tcommit
 write !,^a,?5,$tlevel
 write !,"TEST-I-MORE tests to be done manually. Check smoketest.txt"

; The following should be executed on their own as part of the smoke test milestone
; > setenv EDITOR vi
; > gtm
; YDB> zedit "foo"
;
; YDB> zsy
; then cntl-d to get back to gtm prompt
;
; YDB> w !,$R(-10) ; when this is executed it should give an error

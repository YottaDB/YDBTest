---------------------------------------------------------------------
######## Test various code issues identified by fuzz testing ########
---------------------------------------------------------------------

------------------------------------------------------------
# Test $CHAR(0) in vector portion of $ZTIMEOUT does not SIG-11
------------------------------------------------------------
%YDB-W-ZTIMEOUT, Time expired

------------------------------------------------------------
# Test LVUNDEF error is issued if $ZTIMEOUT is set to an undefined lvn
------------------------------------------------------------
%YDB-E-LVUNDEF, Undefined local variable: xyz

------------------------------------------------------------
# Test no memory leaks when invalid M code is specified in $ZTIMEOUT
------------------------------------------------------------
PASS : No memory leaks detected

------------------------------------------------------------
# Test $VIEW("YCOLLATE",coll,ver) does not SIG-11 if no collation library exists
------------------------------------------------------------
-1

------------------------------------------------------------
# Test NUMOFLOW operands in division operations do not cause %YDB-F-SIGINTDIV fatal errors
------------------------------------------------------------
PASS

------------------------------------------------------------
# Test retrying OPEN after INVMNEMCSPC error does not SIG-11
# Expect INVMNEMCSPC error followed by USRIOINIT error
------------------------------------------------------------

YDB>

YDB>
%YDB-E-INVMNEMCSPC, Unsupported mnemonicspace invalidmnemonicspace

YDB>
%YDB-E-USRIOINIT, User-defined device driver not successfully initialized

YDB>

------------------------------------------------------------
# Test $FNUMBER with a huge 3rd parameter does not cause a SIG-11 or assert failures
------------------------------------------------------------
PASS

------------------------------------------------------------
# Test $FNUMBER with a 3rd parameter >= 1Mb issues a MAXSTRLEN error
------------------------------------------------------------
# Trying length of 2**20 : Expect MAXSTRLEN error
%YDB-E-MAXSTRLEN, Maximum string length exceeded
# Trying length of 2**21 : Expect MAXSTRLEN error
%YDB-E-MAXSTRLEN, Maximum string length exceeded
# Trying length of 2**19 : Do not expect MAXSTRLEN error

------------------------------------------------------------
# Test $JUSTIFY and $FNUMBER with a huge 3rd parameter does not cause a SIG-11 or assert failures
------------------------------------------------------------
# Testing $FNUMBER with random huge 3rd argument
# Testing $JUSTIFY with random huge 3rd argument
# Testing $JUSTIFY with random huge 2nd and 3rd arguments
PASS

------------------------------------------------------------
# Test no stack buffer overflow in lower_to_upper() call in sr_unix/io_open_try.c
# Tests https://gitlab.com/YottaDB/DB/YDB/-/issues/828#note_793149685
# Expect to see a %YDB-E-INVMNEMCSPC error
------------------------------------------------------------
%YDB-E-INVMNEMCSPC, Unsupported mnemonicspace invalidmnemonicspace

------------------------------------------------------------
# Test no stack buffer overflow in lower_to_upper() call in sr_unix/op_fnzparse.c
# Tests https://gitlab.com/YottaDB/DB/YDB/-/issues/828#note_793151980
# Expect to see a %YDB-E-ZPARSETYPE error
------------------------------------------------------------
%YDB-E-ZPARSETYPE, Illegal TYPE argument to $ZPARSE(): abcdefghijklmnopqrstuvwxyz

------------------------------------------------------------
# Test no stack buffer overflow in lower_to_upper() call in sr_port/iosocket_open.c
# Tests https://gitlab.com/YottaDB/DB/YDB/-/issues/828#note_793151980
# Expect to see no errors
------------------------------------------------------------

YDB>

YDB>

YDB>

YDB>

------------------------------------------------------------
# Test $INCREMENT(@glvn) with boolean expression in glvn subscript does not SIG-11
# Expect to see 2 LVUNDEF errors in the first 2 tests. And y(2)=1 in the 3rd test.
------------------------------------------------------------
%YDB-E-LVUNDEF, Undefined local variable: x(1)
%YDB-E-LVUNDEF, Undefined local variable: y
y(2)=1
